/*! 
 Build based on gin-vue-admin 
 Time : 1713878256000 */
import{_ as e,a,r as l,R as t,S as o,o as r,c as u,b as s,d,w as n,K as i,L as p,g as m,f as c,t as v,A as _,e as f,j as b,k as w,E as y,W as h}from"./087AC4D233B64EB0index.js";import{E as g}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as B}from"./087AC4D233B64EB0date-picker.js";/* empty css                     */import"./087AC4D233B64EB0scrollbar.js";/* empty css                      *//* empty css                      *//* empty css                     */import{E as k}from"./087AC4D233B64EB0pagination.js";import"./087AC4D233B64EB0tag.js";import{E as C,a as E}from"./087AC4D233B64EB0select.js";import{E as j,a as D}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{a as V,E as A}from"./087AC4D233B64EB0form-item.js";import{c as U,d as x,e as z,f as S,g as I,b as O,u as F,p as N}from"./087AC4D233B64EB0manage.js";import{f as q,t as T}from"./087AC4D233B64EB0stringFun.js";import{Q as Y}from"./087AC4D233B64EB0vue-quill.snow.js";import{E as J}from"./087AC4D233B64EB0index23.js";import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0index28.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";const K={class:"gva-search-box"},Z={class:"gva-table-box"},M={slot:"reference",class:"name-wrapper"},L={class:"gva-pagination"},P={key:0},Q={key:0},R={key:1},W={key:0},G={key:0},H={key:0},X={key:0},$={key:1},ee={class:"dialog-footer"},ae=e(Object.assign({name:"Api"},{__name:"parts",setup(e){const ae=a(),le=l({modules:{toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]}}),te=a(!0);a([]);const oe=a(!0),re=a([]),ue=a({serialnumber:"",process_mode:"",department:"",mold:"",category:"",project:"",checkout_name:"",checkout_number:"",parts_desc:"",series:"",deferred_date:""});t((()=>ue.value.deferred_date),(()=>{"0001-01-01T00:00:00Z"===ue.value.deferred_date&&(ue.value.deferred_date="")}));const se=a([{value:"0",label:"待处理",type:"success"},{value:"1",label:"完成",type:""},{value:"6",label:"延期",type:"warning"}]),de=a(""),ne=a(1),ie=a(0),pe=a(10),me=a([]),ce=a({}),ve=a([]),_e=()=>{ve.value.push({product_serialnumber:null,product_name:null,w_serialnumber:null,w_name:null})},fe=()=>{ce.value={}},be=()=>{ne.value=1,pe.value=10,je()},we=e=>{pe.value=e,je()},ye=e=>{ne.value=e,je()},he=({prop:e,order:a})=>{e&&("ID"===e&&(e="id"),ce.value.orderKey=T(e),ce.value.desc="descending"===a),je()},ge=a([]),Be=a([]),ke=a([]),Ce=a([]);(async()=>{const e=await U({page:ne.value,pageSize:pe.value,...ce.value});0===e.code&&(ge.value=e.data.list)})();(async()=>{const e=await x({page:ne.value,pageSize:pe.value,...ce.value});0===e.code&&(Be.value=e.data.list)})();(async()=>{const e=await z({page:ne.value,pageSize:pe.value,...ce.value});0===e.code&&(ke.value=e.data.list)})();(async()=>{const e=await S({page:ne.value,pageSize:pe.value,...ce.value});0===e.code&&(Ce.value=e.data.list)})();const Ee=a("配做"),je=async()=>{const e=await I({page:ne.value,pageSize:pe.value,keyword:Ee.value,orderKey:"id",desc:!0,...ce.value});0===e.code&&(me.value=e.data.list,ie.value=e.data.total,ne.value=e.data.page,pe.value=e.data.pageSize)};je();const De=e=>{re.value=e};a(!1),a(!1);const Ve=a(null),Ae=a("查看配做"),Ue=a(!1),xe=a(!1),ze=()=>{Ve.value.resetFields(),ue.value={serialnumber:"",process_mode:"",department:"",mold:"",category:"",project:"",checkout_name:"",checkout_number:"",parts_desc:"",series:"",deferred_date:""},Ue.value=!1},Se=async(e,a)=>{const l=await O({id:e.ID});ue.value=l.data.manage,ve.value=JSON.parse(ue.value.series),(e=>{switch(e){case"edit":oe.value=!1,te.value=!0,Ae.value="更新延期时间";break;case"modify":oe.value=!0,te.value=!0,xe.value=!1,Ae.value="修改配做";break;case"look":oe.value=!0,te.value=!1,xe.value=!0,Ae.value="查看配做"}de.value=e,Ue.value=!0})(a)},Ie=async()=>{Ve.value.validate((async e=>{if(null!==ve.value&&(ue.value.series=JSON.stringify(ve.value)),e)switch(de.value){case"edit":0===(await N(ue.value)).code&&b({type:"success",message:"编辑成功",showClose:!0}),je(),ze();break;case"modify":0===(await F(ue.value)).code&&b({type:"success",message:"编辑成功",showClose:!0}),je(),ze();break;default:b({type:"error",message:"未知操作",showClose:!0})}}))};return(e,a)=>{const l=C,t=E,b=V,U=w,x=y,z=A,S=j,I=J,O=D,F=k,N=o("CirclePlusFilled"),T=h,re=B,de=g;return r(),u("div",null,[s("div",K,[d(z,{ref:"searchForm",inline:!0,model:ce.value},{default:n((()=>[d(b,{label:"部门",style:{width:"200px"}},{default:n((()=>[d(t,{modelValue:ce.value.department,"onUpdate:modelValue":a[0]||(a[0]=e=>ce.value.department=e),placeholder:"北京安新"},{default:n((()=>[(r(!0),u(i,null,p(ge.value,(e=>(r(),m(l,{key:e.authorityId,label:e.authorityName,value:e.authorityName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(b,{label:"类别",style:{width:"200px"}},{default:n((()=>[d(t,{modelValue:ce.value.category,"onUpdate:modelValue":a[1]||(a[1]=e=>ce.value.category=e),placeholder:"请选择"},{default:n((()=>[(r(!0),u(i,null,p(Be.value,(e=>(r(),m(l,{key:e.name,label:e.genre,value:e.genre},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(b,{label:"受检物名称",style:{width:"200px"}},{default:n((()=>[d(U,{modelValue:ce.value.checkout_name,"onUpdate:modelValue":a[2]||(a[2]=e=>ce.value.checkout_name=e),placeholder:"受检物名称"},null,8,["modelValue"])])),_:1}),d(b,{label:"项目名称",style:{width:"200px"}},{default:n((()=>[d(U,{modelValue:ce.value.project,"onUpdate:modelValue":a[3]||(a[3]=e=>ce.value.project=e),placeholder:"项目名称"},null,8,["modelValue"])])),_:1}),d(b,{label:"供应商名称",style:{width:"200px"}},{default:n((()=>[d(U,{modelValue:ce.value.supplier,"onUpdate:modelValue":a[4]||(a[4]=e=>ce.value.supplier=e),placeholder:"项目名称"},null,8,["modelValue"])])),_:1}),d(b,null,{default:n((()=>[d(x,{type:"primary",icon:"search",onClick:be},{default:n((()=>[c("查询")])),_:1}),d(x,{icon:"refresh",onClick:fe},{default:n((()=>[c("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",Z,[d(O,{data:me.value,onSortChange:he,onSelectionChange:De},{default:n((()=>[d(S,{align:"left",label:"ID","min-width":"150",prop:"ID",sortable:"custom"}),d(S,{align:"left",label:"受检物名称","min-width":"150",prop:"checkout_name",sortable:"custom"}),d(S,{align:"left",label:"受检物号","min-width":"150",prop:"checkout_number",sortable:"custom"}),d(S,{align:"left",label:"类别","min-width":"150",prop:"category",sortable:"custom"}),d(S,{align:"left",label:"部门","min-width":"150",prop:"department",sortable:"custom"}),d(S,{align:"left",label:"项目","min-width":"150",prop:"project",sortable:"custom"}),d(S,{align:"left",label:"状态","min-width":"150",prop:"status",sortable:"custom"},{default:n((e=>[s("div",M,[d(I,{type:"1"===e.row.status?"success":"-1"===e.row.status?"danger":"info","disable-transitions":""},{default:n((()=>[c(v("1"===e.row.status?"已完成":"-1"===e.row.status?"延期":"待处理"),1)])),_:2},1032,["type"])])])),_:1}),d(S,{align:"left",label:"配做订单","min-width":"600",prop:"series"},{default:n((e=>[d(O,{data:JSON.parse(e.row.series),border:"",style:{width:"100%"},stripe:!0},{default:n((()=>[d(S,{label:"产品系列号",align:"center","min-width":"100",prop:"product_serialnumber"},{default:n((e=>[s("span",null,v(e.row.product_serialnumber),1)])),_:2},1024),d(S,{label:"产品名称",align:"center","min-width":"100",prop:"product_name"},{default:n((e=>[s("span",null,v(e.row.product_name),1)])),_:2},1024),d(S,{label:"物料系列号","min-width":"100",prop:"w_serialnumber"},{default:n((e=>[s("span",null,v(e.row.w_serialnumber),1)])),_:2},1024),d(S,{label:"物料名称",align:"center","min-width":"100",prop:"w_name"},{default:n((e=>[s("span",null,v(e.row.w_name),1)])),_:2},1024)])),_:2},1032,["data"])])),_:1}),d(S,{align:"left",label:"延期时间","min-width":"150",prop:"deferred_date",sortable:"custom"},{default:n((a=>[d(I,{type:e.info,"disable-transitions":""},{default:n((()=>[c(v("0001-01-01T00:00:00Z"!==a.row.deferred_date?_(q)(a.row.deferred_date):"按期完成任务"),1)])),_:2},1032,["type"])])),_:1}),d(S,{align:"left",fixed:"right",label:"操作",width:"300"},{default:n((e=>[d(x,{icon:"view",type:"primary",link:"",onClick:a=>Se(e.row,"look")},{default:n((()=>[c("查看")])),_:2},1032,["onClick"]),d(x,{icon:"set-up",type:"primary",link:"",onClick:a=>Se(e.row,"edit")},{default:n((()=>[c("处理")])),_:2},1032,["onClick"]),d(x,{icon:"set-up",type:"primary",link:"",onClick:a=>Se(e.row,"modify")},{default:n((()=>[c("修改")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",L,[d(F,{"current-page":ne.value,"page-size":pe.value,"page-sizes":[10,30,50,100],total:ie.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:ye,onSizeChange:we},null,8,["current-page","page-size","total"])])]),d(de,{modelValue:Ue.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Ue.value=e),"before-close":ze,title:Ae.value,width:"50%"},{footer:n((()=>[s("div",ee,[te.value?(r(),m(x,{key:0,onClick:ze},{default:n((()=>[c("取 消")])),_:1})):f("",!0),te.value?(r(),m(x,{key:1,type:"primary",onClick:Ie},{default:n((()=>[c("确 定")])),_:1})):f("",!0)])])),default:n((()=>[d(z,{ref_key:"apiForm",ref:Ve,model:ue.value,rules:e.rules,inline:!0},{default:n((()=>[oe.value?(r(),u("div",P,[d(b,{label:"配做方案",prop:"parts_desc",style:{width:"100%"}},{default:n((()=>[xe.value?(r(),u("div",Q,[d(_(Y),{options:le,"content-type":"html",ref_key:"quillEditor",ref:ae,theme:"snow",content:ue.value.parts_desc,"onUpdate:content":a[5]||(a[5]=e=>ue.value.parts_desc=e),value:ue.value.parts_desc,readOnly:""},null,8,["options","content","value"])])):f("",!0),xe.value?f("",!0):(r(),u("div",R,[d(_(Y),{options:le,"content-type":"html",ref_key:"quillEditor",ref:ae,theme:"snow",content:ue.value.parts_desc,"onUpdate:content":a[6]||(a[6]=e=>ue.value.parts_desc=e),value:ue.value.parts_desc},null,8,["options","content","value"])]))])),_:1}),d(b,{prop:"series",label:"配做订单"},{default:n((()=>[d(O,{data:ve.value,border:"",style:{width:"100%"},stripe:!0},{default:n((()=>[d(S,{label:"产品系列号",align:"center","min-width":"150",prop:"product_serialnumber"},{default:n((e=>[xe.value?(r(),u("span",W,v(e.row.product_serialnumber),1)):f("",!0),xe.value?f("",!0):(r(),m(U,{key:1,modelValue:e.row.product_serialnumber,"onUpdate:modelValue":a=>e.row.product_serialnumber=a},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),d(S,{label:"产品名称",align:"center","min-width":"150",prop:"product_name"},{default:n((e=>[xe.value?(r(),u("span",G,v(e.row.product_serialnumber),1)):f("",!0),xe.value?f("",!0):(r(),m(U,{key:1,modelValue:e.row.product_name,"onUpdate:modelValue":a=>e.row.product_name=a},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),d(S,{label:"物料系列号","min-width":"150",prop:"w_serialnumber"},{default:n((e=>[xe.value?(r(),u("span",H,v(e.row.product_serialnumber),1)):f("",!0),xe.value?f("",!0):(r(),m(U,{key:1,modelValue:e.row.w_serialnumber,"onUpdate:modelValue":a=>e.row.w_serialnumber=a},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),d(S,{label:"物料名称",align:"center","min-width":"150",prop:"w_name"},{default:n((e=>[xe.value?(r(),u("span",X,v(e.row.product_serialnumber),1)):f("",!0),xe.value?f("",!0):(r(),m(U,{key:1,modelValue:e.row.w_name,"onUpdate:modelValue":a=>e.row.w_name=a},null,8,["modelValue","onUpdate:modelValue"]))])),_:1}),xe.value?f("",!0):(r(),m(S,{key:0,label:"操作","min-width":"50",prop:"action",align:"center"},{default:n((a=>[d(x,{onClick:l=>e.deleteTableData(a.row),link:"",icon:"Delete",type:"primary"},null,8,["onClick"])])),_:1}))])),_:1},8,["data"]),xe.value?f("",!0):(r(),m(T,{key:0,onClick:_e,class:"icon",size:"24",color:"#fb7a14"},{default:n((()=>[d(N)])),_:1}))])),_:1})])):f("",!0),oe.value?f("",!0):(r(),u("div",$,[d(b,{label:"状态",prop:"status",style:{width:"30%"}},{default:n((()=>[d(t,{modelValue:ue.value.status,"onUpdate:modelValue":a[7]||(a[7]=e=>ue.value.status=e),placeholder:"状态",style:{width:"100%"}},{default:n((()=>[(r(!0),u(i,null,p(se.value,(e=>(r(),m(l,{key:e.value,label:"".concat(e.label),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(b,{label:"延期至",prop:"deferred_date",style:{width:"30%"}},{default:n((()=>[d(re,{modelValue:ue.value.deferred_date,"onUpdate:modelValue":a[8]||(a[8]=e=>ue.value.deferred_date=e),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDT15:04:05Z"},null,8,["modelValue"])])),_:1})]))])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-709ef226"]]);export{ae as default};
