/*! 
 Build based on gin-vue-admin 
 Time : 1713878256000 */
import{x as e,a5 as a,de as l,G as t,y as r,T as s,az as o,aI as n,C as i,a3 as u,A as d,o as p,c as m,b as c,K as v,L as f,g,d as b,B as y,bf as h,ag as C,a7 as B,a2 as E,F as A,n as D,H as _,f as w,t as x,e as j,aG as k,J as I,a6 as V,s as S,a as T,r as N,S as U,w as z,m as q,$ as F,j as $,W as O,k as W,E as G}from"./087AC4D233B64EB0index.js";import{E as K}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as R}from"./087AC4D233B64EB0scrollbar.js";import{E as J}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";/* empty css                      */import{E as L,a as H}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as Q}from"./087AC4D233B64EB0popover.js";import{a as Z,E as M}from"./087AC4D233B64EB0form-item.js";/* empty css                      */import{E as P}from"./087AC4D233B64EB0date-picker.js";/* empty css                     */import{f as X}from"./087AC4D233B64EB0format.js";import{_ as Y}from"./087AC4D233B64EB0warningBar.js";import{E as ee}from"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index23.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index28.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const ae=Symbol("elDescriptions");var le=e({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup:()=>({descriptions:a(ae,{})}),render(){var e,a,i,u,d,p,m;const c=l(this.cell),v=((null==(e=this.cell)?void 0:e.dirs)||[]).map((e=>{const{dir:a,arg:l,modifiers:t,value:r}=e;return[a,r,l,t]})),{border:f,direction:g}=this.descriptions,b="vertical"===g,y=(null==(u=null==(i=null==(a=this.cell)?void 0:a.children)?void 0:i.label)?void 0:u.call(i))||c.label,h=null==(m=null==(p=null==(d=this.cell)?void 0:d.children)?void 0:p.default)?void 0:m.call(p),C=c.span,B=c.align?"is-".concat(c.align):"",E=c.labelAlign?"is-".concat(c.labelAlign):B,A=c.className,D=c.labelClassName,_={width:t(c.width),minWidth:t(c.minWidth)},w=r("descriptions");switch(this.type){case"label":return s(o(this.tag,{style:_,class:[w.e("cell"),w.e("label"),w.is("bordered-label",f),w.is("vertical-label",b),E,D],colSpan:b?C:1},y),v);case"content":return s(o(this.tag,{style:_,class:[w.e("cell"),w.e("content"),w.is("bordered-content",f),w.is("vertical-content",b),B,A],colSpan:b?C:2*C-1},h),v);default:return s(o("td",{style:_,class:[w.e("cell"),B],colSpan:C},[n(y)?void 0:o("span",{class:[w.e("label"),D]},y),o("span",{class:[w.e("content"),A]},h)]),v)}}});const te=i({row:{type:u(Array),default:()=>[]}}),re={key:1},se=e({name:"ElDescriptionsRow"});var oe=y(e({...se,props:te,setup(e){const l=a(ae,{});return(e,a)=>"vertical"===d(l).direction?(p(),m(v,{key:0},[c("tr",null,[(p(!0),m(v,null,f(e.row,((e,a)=>(p(),g(d(le),{key:"tr1-".concat(a),cell:e,tag:"th",type:"label"},null,8,["cell"])))),128))]),c("tr",null,[(p(!0),m(v,null,f(e.row,((e,a)=>(p(),g(d(le),{key:"tr2-".concat(a),cell:e,tag:"td",type:"content"},null,8,["cell"])))),128))])],64)):(p(),m("tr",re,[(p(!0),m(v,null,f(e.row,((e,a)=>(p(),m(v,{key:"tr3-".concat(a)},[d(l).border?(p(),m(v,{key:0},[b(d(le),{cell:e,tag:"td",type:"label"},null,8,["cell"]),b(d(le),{cell:e,tag:"td",type:"content"},null,8,["cell"])],64)):(p(),g(d(le),{key:1,cell:e,tag:"td",type:"both"},null,8,["cell"]))],64)))),128))]))}}),[["__file","descriptions-row.vue"]]);const ne=i({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:h,title:{type:String,default:""},extra:{type:String,default:""}}),ie=e({name:"ElDescriptions"});var ue=y(e({...ie,props:ne,setup(e){const a=e,l=r("descriptions"),t=C(),s=B();E(ae,a);const o=A((()=>[l.b(),l.m(t.value)])),n=(e,a,l,t=!1)=>(e.props||(e.props={}),a>l&&(e.props.span=l),t&&(e.props.span=a),e),i=()=>{if(!s.default)return[];const e=k(s.default()).filter((e=>{var a;return"ElDescriptionsItem"===(null==(a=null==e?void 0:e.type)?void 0:a.name)})),l=[];let t=[],r=a.column,o=0;return e.forEach(((s,i)=>{var u;const d=(null==(u=s.props)?void 0:u.span)||1;if(i<e.length-1&&(o+=d>r?r:d),i===e.length-1){const e=a.column-o%a.column;return t.push(n(s,e,r,!0)),void l.push(t)}d<r?(r-=d,t.push(s)):(t.push(n(s,d,r)),l.push(t),r=a.column,t=[])})),l};return(e,a)=>(p(),m("div",{class:D(d(o))},[e.title||e.extra||e.$slots.title||e.$slots.extra?(p(),m("div",{key:0,class:D(d(l).e("header"))},[c("div",{class:D(d(l).e("title"))},[_(e.$slots,"title",{},(()=>[w(x(e.title),1)]))],2),c("div",{class:D(d(l).e("extra"))},[_(e.$slots,"extra",{},(()=>[w(x(e.extra),1)]))],2)],2)):j("v-if",!0),c("div",{class:D(d(l).e("body"))},[c("table",{class:D([d(l).e("table"),d(l).is("bordered",e.border)])},[c("tbody",null,[(p(!0),m(v,null,f(i(),((e,a)=>(p(),g(oe,{key:a,row:e},null,8,["row"])))),128))])],2)],2)],2))}}),[["__file","description.vue"]]);const de=e({name:"ElDescriptionsItem",props:i({label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}})}),pe=I(ue,{DescriptionsItem:de}),me=V(de),ce=e=>S({url:"/sysExportTemplate/createSysExportTemplate",method:"post",data:e}),ve=e=>S({url:"/sysExportTemplate/findSysExportTemplate",method:"get",params:e}),fe={class:"gva-search-box"},ge={class:"gva-table-box"},be={class:"gva-btn-list"},ye=c("p",null,"确定要删除吗？",-1),he={style:{"text-align":"right","margin-top":"8px"}},Ce={class:"gva-pagination"},Be={class:"dialog-footer"},Ee=Object.assign({name:"ExportTemplate"},{__name:"exportTemplate",setup(e){const a=T({name:"",tableName:"",templateID:"",templateInfo:""}),l=N({name:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],tableName:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],templateID:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],templateInfo:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),t=N({createdAt:[{validator:(e,a,l)=>{v.value.startCreatedAt&&!v.value.endCreatedAt?l(new Error("请填写结束日期")):!v.value.startCreatedAt&&v.value.endCreatedAt?l(new Error("请填写开始日期")):v.value.startCreatedAt&&v.value.endCreatedAt&&(v.value.startCreatedAt.getTime()===v.value.endCreatedAt.getTime()||v.value.startCreatedAt.getTime()>v.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),r=T(),s=T(),o=T(1),n=T(0),i=T(10),u=T([]),v=T({}),f=()=>{v.value={},C()},g=()=>{var e;null==(e=s.value)||e.validate((async e=>{e&&(o.value=1,i.value=10,C())}))},y=e=>{i.value=e,C()},h=e=>{o.value=e,C()},C=async()=>{const e=await(a={page:o.value,pageSize:i.value,...v.value},S({url:"/sysExportTemplate/getSysExportTemplateList",method:"get",params:a}));var a;0===e.code&&(u.value=e.data.list,n.value=e.data.total,o.value=e.data.page,i.value=e.data.pageSize)};C();(async()=>{})();const B=T([]),E=e=>{B.value=e},A=T(!1),D=async()=>{const e=[];if(0===B.value.length)return void $({type:"warning",message:"请选择要删除的数据"});B.value&&B.value.map((a=>{e.push(a.ID)}));var a;0===(await(a={ids:e},S({url:"/sysExportTemplate/deleteSysExportTemplateByIds",method:"delete",data:a}))).code&&($({type:"success",message:"删除成功"}),u.value.length===e.length&&o.value>1&&o.value--,A.value=!1,C())},_=T(""),j=async e=>{var a;0===(await(a={ID:e.ID},S({url:"/sysExportTemplate/deleteSysExportTemplate",method:"delete",data:a}))).code&&($({type:"success",message:"删除成功"}),1===u.value.length&&o.value>1&&o.value--,C())},k=T(!1),I=T(!1),V=async e=>{const l=await ve({ID:e.ID});0===l.code&&(a.value=l.data.resysExportTemplate,I.value=!0)},ae=()=>{I.value=!1,a.value={name:"",tableName:"",templateID:"",templateInfo:""}},le=()=>{_.value="create",k.value=!0},te=()=>{k.value=!1,a.value={name:"",tableName:"",templateID:"",templateInfo:""}},re=async()=>{var e;try{JSON.parse(a.value.templateInfo)}catch(l){return void $({type:"error",message:"模板信息格式不正确，请检查"})}null==(e=r.value)||e.validate((async e=>{if(!e)return;let l;switch(_.value){case"create":default:l=await ce(a.value);break;case"update":l=await(t=a.value,S({url:"/sysExportTemplate/updateSysExportTemplate",method:"put",data:t}))}var t;0===l.code&&($({type:"success",message:"创建/更改成功"}),te(),C())}))};return(e,C)=>{const S=U("QuestionFilled"),T=O,N=ee,$=P,se=Z,oe=W,ne=G,ie=M,ue=Q,de=L,ce=U("InfoFilled"),Ee=H,Ae=J,De=R,_e=K,we=me,xe=pe;return p(),m("div",null,[b(Y,{title:"本功能提供同步的表格导出功能，大数据量的异步表格导出功能，可以选择点我定制",href:"https://flipped-aurora.feishu.cn/docx/KwjxdnvatozgwIxGV0rcpkZSn4d"}),c("div",fe,[b(ie,{ref_key:"elSearchFormRef",ref:s,inline:!0,model:v.value,class:"demo-form-inline",rules:t,onKeyup:q(g,["enter"])},{default:z((()=>[b(se,{label:"创建日期",prop:"createdAt"},{label:z((()=>[c("span",null,[w(" 创建日期 "),b(N,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:z((()=>[b(T,null,{default:z((()=>[b(S)])),_:1})])),_:1})])])),default:z((()=>[b($,{modelValue:v.value.startCreatedAt,"onUpdate:modelValue":C[0]||(C[0]=e=>v.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!v.value.endCreatedAt&&e.getTime()>v.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),w(" — "),b($,{modelValue:v.value.endCreatedAt,"onUpdate:modelValue":C[1]||(C[1]=e=>v.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!v.value.startCreatedAt&&e.getTime()<v.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),b(se,{label:"模板名称",prop:"name"},{default:z((()=>[b(oe,{modelValue:v.value.name,"onUpdate:modelValue":C[2]||(C[2]=e=>v.value.name=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),b(se,{label:"表名称",prop:"tableName"},{default:z((()=>[b(oe,{modelValue:v.value.tableName,"onUpdate:modelValue":C[3]||(C[3]=e=>v.value.tableName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),b(se,{label:"模板标识",prop:"templateID"},{default:z((()=>[b(oe,{modelValue:v.value.templateID,"onUpdate:modelValue":C[4]||(C[4]=e=>v.value.templateID=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),b(se,null,{default:z((()=>[b(ne,{type:"primary",icon:"search",onClick:g},{default:z((()=>[w("查询")])),_:1}),b(ne,{icon:"refresh",onClick:f},{default:z((()=>[w("重置")])),_:1})])),_:1})])),_:1},8,["model","rules"])]),c("div",ge,[c("div",be,[b(ne,{type:"primary",icon:"plus",onClick:le},{default:z((()=>[w("新增")])),_:1}),b(ue,{visible:A.value,"onUpdate:visible":C[7]||(C[7]=e=>A.value=e),disabled:!B.value.length,placement:"top",width:"160"},{reference:z((()=>[b(ne,{icon:"delete",style:{"margin-left":"10px"},disabled:!B.value.length,onClick:C[6]||(C[6]=e=>A.value=!0)},{default:z((()=>[w("删除")])),_:1},8,["disabled"])])),default:z((()=>[ye,c("div",he,[b(ne,{type:"primary",link:"",onClick:C[5]||(C[5]=e=>A.value=!1)},{default:z((()=>[w("取消")])),_:1}),b(ne,{type:"primary",onClick:D},{default:z((()=>[w("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),b(Ee,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:u.value,"row-key":"ID",onSelectionChange:E},{default:z((()=>[b(de,{type:"selection",width:"55"}),b(de,{align:"left",label:"日期",width:"180"},{default:z((e=>[w(x(d(X)(e.row.CreatedAt)),1)])),_:1}),b(de,{align:"left",label:"模板名称",prop:"name",width:"120"}),b(de,{align:"left",label:"表名称",prop:"tableName",width:"120"}),b(de,{align:"left",label:"模板标识",prop:"templateID",width:"120"}),b(de,{align:"left",label:"模板信息",prop:"templateInfo","min-width":"120"}),b(de,{align:"left",label:"操作","min-width":"120"},{default:z((e=>[b(ne,{type:"primary",link:"",class:"table-button",onClick:a=>V(e.row)},{default:z((()=>[b(T,{style:{"margin-right":"5px"}},{default:z((()=>[b(ce)])),_:1}),w(" 查看详情 ")])),_:2},1032,["onClick"]),b(ne,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await ve({ID:e.ID});_.value="update",0===l.code&&(a.value=l.data.resysExportTemplate,k.value=!0)})(e.row)},{default:z((()=>[w("变更")])),_:2},1032,["onClick"]),b(ne,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void F.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{j(l)}));var l}},{default:z((()=>[w("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),c("div",Ce,[b(Ae,{layout:"total, sizes, prev, pager, next, jumper","current-page":o.value,"page-size":i.value,"page-sizes":[10,30,50,100],total:n.value,onCurrentChange:h,onSizeChange:y},null,8,["current-page","page-size","total"])])]),b(_e,{modelValue:k.value,"onUpdate:modelValue":C[12]||(C[12]=e=>k.value=e),"before-close":te,title:"create"===_.value?"添加":"修改","destroy-on-close":""},{footer:z((()=>[c("div",Be,[b(ne,{onClick:te},{default:z((()=>[w("取 消")])),_:1}),b(ne,{type:"primary",onClick:re},{default:z((()=>[w("确 定")])),_:1})])])),default:z((()=>[b(De,{height:"500px"},{default:z((()=>[b(ie,{ref_key:"elFormRef",ref:r,model:a.value,"label-position":"right",rules:l,"label-width":"100px"},{default:z((()=>[b(se,{label:"模板名称:",prop:"name"},{default:z((()=>[b(oe,{modelValue:a.value.name,"onUpdate:modelValue":C[8]||(C[8]=e=>a.value.name=e),clearable:!0,placeholder:"请输入模板名称"},null,8,["modelValue"])])),_:1}),b(se,{label:"表名称:",prop:"tableName"},{default:z((()=>[b(oe,{modelValue:a.value.tableName,"onUpdate:modelValue":C[9]||(C[9]=e=>a.value.tableName=e),clearable:!0,placeholder:"请输入要导出的表名称"},null,8,["modelValue"])])),_:1}),b(se,{label:"模板标识:",prop:"templateID"},{default:z((()=>[b(oe,{modelValue:a.value.templateID,"onUpdate:modelValue":C[10]||(C[10]=e=>a.value.templateID=e),clearable:!0,placeholder:"模板标识为前端组件需要挂在的标识属性"},null,8,["modelValue"])])),_:1}),b(se,{label:"模板信息:",prop:"templateInfo"},{default:z((()=>[b(oe,{modelValue:a.value.templateInfo,"onUpdate:modelValue":C[11]||(C[11]=e=>a.value.templateInfo=e),type:"textarea",rows:16,clearable:!0,placeholder:'模板信息格式：key标识数据库column列名称，value标识导出excel列名称，如下：\n{\n  "table_name1":"第一列",\n  "table_name2":"第二列",\n  "table_name3":"第三列",\n  "table_name4":"第四列",\n}'},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),b(_e,{modelValue:I.value,"onUpdate:modelValue":C[13]||(C[13]=e=>I.value=e),style:{width:"800px"},"lock-scroll":"","before-close":ae,title:"查看详情","destroy-on-close":""},{default:z((()=>[b(De,{height:"550px"},{default:z((()=>[b(xe,{column:"1",border:""},{default:z((()=>[b(we,{label:"模板名称"},{default:z((()=>[w(x(a.value.name),1)])),_:1}),b(we,{label:"表名称"},{default:z((()=>[w(x(a.value.tableName),1)])),_:1}),b(we,{label:"模板标识"},{default:z((()=>[w(x(a.value.templateID),1)])),_:1}),b(we,{label:"模板信息"},{default:z((()=>[w(x(a.value.templateInfo),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{Ee as default};
