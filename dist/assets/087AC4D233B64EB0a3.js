/*! 
 Build based on gin-vue-admin 
 Time : 1713878256000 */
import{x as defineComponent,y as useNamespace,a2 as provide,az as h,H as renderSlot,C as buildProps,a1 as iconPropType,F as computed,o as openBlock,c as createElementBlock,b as createBaseVNode,n as normalizeClass,A as unref,I as normalizeStyle,g as createBlock,w as withCtx,Z as resolveDynamicComponent,W as ElIcon,e as createCommentVNode,t as toDisplayString,B as _export_sfc,J as withInstall,a6 as withNoopInstall,a as ref,M as onMounted,N as nextTick,j as ElMessage,_ as _export_sfc$1,aK as mergeModels,aL as useModel,r as reactive,l as useUserStore,S as resolveComponent,d as createVNode,K as Fragment,L as renderList,f as createTextVNode,k as ElInput,E as ElButton,p as pushScopeId,h as popScopeId}from"./087AC4D233B64EB0index.js";import{E as ElDrawer}from"./087AC4D233B64EB0drawer.js";import"./087AC4D233B64EB0overlay.js";import{E as ElDialog}from"./087AC4D233B64EB0dialog.js";import{E as ElUpload}from"./087AC4D233B64EB0upload2.js";import{E as ElProgress}from"./087AC4D233B64EB0progress.js";/* empty css                     */import{E as ElDatePicker}from"./087AC4D233B64EB0date-picker.js";/* empty css                     */import"./087AC4D233B64EB0scrollbar.js";/* empty css                      *//* empty css                      */import{E as ElSwitch}from"./087AC4D233B64EB0switch.js";import{E as ElCard}from"./087AC4D233B64EB0card.js";import{E as ElPagination}from"./087AC4D233B64EB0pagination.js";import"./087AC4D233B64EB0tag.js";import{E as ElOption,a as ElSelect}from"./087AC4D233B64EB0select.js";import{E as ElTableColumn,a as ElTable}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{a as ElFormItem,E as ElForm}from"./087AC4D233B64EB0form-item.js";import{b as getManageById,c as getAuthorityList,d as getGenreList,e as getSupplierList,f as getProjectList,g as getManageList,u as updateManage}from"./087AC4D233B64EB0manage.js";import{f as formatDate,t as toSQLLine}from"./087AC4D233B64EB0stringFun.js";import{s as strToJson}from"./087AC4D233B64EB0format.js";import{bO as use,i as init,eB as install,eC as install$1,eA as install$2}from"./087AC4D233B64EB0install.js";import{Q as QuillEditor}from"./087AC4D233B64EB0vue-quill.snow.js";import{E as ElTag}from"./087AC4D233B64EB0index23.js";import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0cloneDeep.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0index28.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const Timeline=defineComponent({name:"ElTimeline",setup(e,{slots:a}){const t=useNamespace("timeline");return provide("timeline",a),()=>h("ul",{class:[t.b()]},[renderSlot(a,"default")])}}),timelineItemProps=buildProps({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:iconPropType},hollow:{type:Boolean,default:!1}}),__default__=defineComponent({name:"ElTimelineItem"}),_sfc_main$3=defineComponent({...__default__,props:timelineItemProps,setup(e){const a=e,t=useNamespace("timeline-item"),l=computed((()=>[t.e("node"),t.em("node",a.size||""),t.em("node",a.type||""),t.is("hollow",a.hollow)]));return(e,a)=>(openBlock(),createElementBlock("li",{class:normalizeClass([unref(t).b(),{[unref(t).e("center")]:e.center}])},[createBaseVNode("div",{class:normalizeClass(unref(t).e("tail"))},null,2),e.$slots.dot?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(l)),style:normalizeStyle({backgroundColor:e.color})},[e.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(t).e("icon"))},{default:withCtx((()=>[(openBlock(),createBlock(resolveDynamicComponent(e.icon)))])),_:1},8,["class"])):createCommentVNode("v-if",!0)],6)),e.$slots.dot?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(t).e("dot"))},[renderSlot(e.$slots,"dot")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(t).e("wrapper"))},[e.hideTimestamp||"top"!==e.placement?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(t).e("timestamp"),unref(t).is("top")])},toDisplayString(e.timestamp),3)),createBaseVNode("div",{class:normalizeClass(unref(t).e("content"))},[renderSlot(e.$slots,"default")],2),e.hideTimestamp||"bottom"!==e.placement?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(t).e("timestamp"),unref(t).is("bottom")])},toDisplayString(e.timestamp),3))],2)],2))}});var TimelineItem=_export_sfc(_sfc_main$3,[["__file","timeline-item.vue"]]);const ElTimeline=withInstall(Timeline,{TimelineItem:TimelineItem}),ElTimelineItem=withNoopInstall(TimelineItem),timeline="",timelineItem="",_sfc_main$2=defineComponent({__name:"index",props:{width:{default:"100%"},height:{default:"100%"},id:{},step:{}},emits:["clickNode","issues","reduceIssue"],setup(e,{emit:a}){use([install,install$1,install$2]);const t=ref(),l=ref();var o;const r=e,i=computed((()=>"number"==typeof r.width?r.width+"px":r.width)),s=computed((()=>"number"==typeof r.height?r.height+"px":r.height));ref({});const n=a;function d(e){ElMessage({type:"error",message:e,showClose:!0})}function u(e,a){const t=[...e];for(;t.length>0;){const e=t.shift();if(e.name===a)return e;e.children&&e.children.length>0&&t.push(...e.children)}}onMounted((()=>{nextTick((()=>{l.value=init(t.value),(o={tooltip:{hideDelay:500,trigger:"item",triggerOn:"mousemove",enterable:!0,confine:!0,formatter:function(e){m=e;var a="";return a+='<div><input autocomplete="off" id="node" style=" border: 1px solid rgba(0, 255, 255, 0.1);border-radius: 5px;box-shadow: 0px 0px 5px rgba(0, 0, 255, 0.3);padding: 8px;outline: none;"/> <br/><button id="customButton" style="background-color: #4CAF50;border: none;color: white;padding: 5px 10px;text-align: center;text-decoration: none;display: inline-block;font-size: 15px;border-radius: 1px;cursor: pointer;box-shadow: 0px 0px 10px rgba(76, 175, 80, 0.4); ">添加</button ><button id="deleteButton" style="background-color: #4CAF50;border: none;color: white;padding: 5px 10px;text-align: center;text-decoration: none;display: inline-block;font-size: 15px;border-radius: 1px;cursor: pointer;box-shadow: 0px 0px 10px rgba(76, 175, 80, 0.4); margin-left:10px;">删除</button ><button id="modifyButton" style="background-color: #4CAF50;border: none;color: white;padding: 5px 10px;text-align: center;text-decoration: none;display: inline-block;font-size: 15px;border-radius: 1px;cursor: pointer;box-shadow: 0px 0px 10px rgba(76, 175, 80, 0.4); margin-left:10px;">修改</button ></div> '},backgroundColor:"#FFF",borderColor:"#1890FF",borderWidth:1,borderRadius:8,padding:[10,8],textStyle:{color:"#333",fontWeight:400,fontSize:16,lineHeight:20,width:60,overflow:"breakAll",ellipsis:"..."},extraCssText:"box-shadow: 0 0 9px rgba(0, 0, 0, 0.3); text-align: left;padding:-10px;"}})&&l.value.setOption(o,!0),l.value.on("dblclick",(function(e){if(r.step>=4)return void d("当前流程已经确认，不可操作");const a=u(c.children,e.data.name);if(void 0!==a)if("red"===a.label.color){a.label.color="#000000",p(c);const t=JSON.parse(JSON.stringify(e.data.name));n("reduceIssue",t)}else{a.label.color="red",p(c);let t={name:e.data.name};const l=JSON.parse(JSON.stringify(t));n("issues",l)}n("clickNode",c)})),h(),window.addEventListener("mousemove",(()=>{if(null!==document.getElementById("node")&&null!==m.data){let e=u(c.children,m.data.name);if(void 0===e)return;document.getElementById("customButton").onclick=function(){if(r.step>=4)return void d("当前流程已经确认，不可新增数据");let a=document.getElementById("node").value;if(""===a)return void d("节点内容不能为空");let t={name:a,value:0,parent:m.data.name,label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[]};e.children.push(t),p(c)},document.getElementById("deleteButton").onclick=function(){if(r.step>=4)return void d("当前流程已经确认，不可删除节点");let a=u(c.children,e.parent);void 0!==a?(a.children=[],l.value.clear(),l.value.setOption(o,!0),p(c)):d("父节点不存在")},document.getElementById("modifyButton").onclick=function(){if(r.step>=4)return void d("当前流程已经确认，不可修改");let a=document.getElementById("node").value;""!==a?(e.name=a,l.value.clear(),l.value.setOption(o,!0),p(c)):ElMessage({type:"error",message:"节点内容不能为空",showClose:!0})},n("clickNode",c)}}))}))}));let c={name:"质量管理",label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[{name:"人",value:1,parent:"质量管理",children:[],label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"}},{name:"机",parent:"质量管理",value:2,label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[]},{name:"料",parent:"质量管理",value:3,label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[]},{name:"法",parent:"质量管理",value:4,label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[]},{name:"环",parent:"质量管理",value:5,label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[]},{name:"测",parent:"质量管理",value:6,label:{verticalAlign:"middle",align:"right",fontSize:16,color:"#333"},children:[]}]};var m;const p=e=>{l.value.setOption({series:[{type:"tree",data:[e],name:"树图",top:"1%",left:"15%",bottom:"1%",right:"20%",layout:"orthogonal",orient:"LR",edgeShape:"polyline",roam:!0,zoomLock:!0,initialTreeDepth:6,symbol:"none",symbolRotate:270,symbolSize:16,itemStyle:{color:"#1890FF",borderColor:"rgba(255, 144, 0, 1)",borderWidth:1,borderType:"dotted",borderCap:"square",shadowColor:"rgba(0,121,221,0.3)",shadowBlur:16,opacity:1},lineStyle:{color:"rgba(0,0,0,.35)",width:2,curveness:.5,shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:10},emphasis:{disabled:!0,focus:"self",blurScope:"coordinateSystem",itemStyle:{color:"#1890FF",borderColor:"rgba(255, 144, 0, 1)",borderWidth:1,borderType:"solid",borderCap:"square",shadowColor:"rgba(0,121,221,0.3)",shadowBlur:12,opacity:1},lineStyle:{color:"rgba(0,0,0,.45)",width:2,curveness:.5,shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:6},label:{color:"#333",fontWeight:600}},blur:{itemStyle:{},lineStyle:{},label:{}},leaves:{label:{distance:20,color:"#000000",position:"right",verticalAlign:"middle",align:"right",fontSize:18},itemStyle:{},emphasis:{},blur:{},select:{}},animation:!0,expandAndCollapse:!1}]})},h=async()=>{const e=await getManageById({id:r.id});if(0===e.code&&""!==e.data.manage.a3_affirm)return c=JSON.parse(e.data.manage.a3_affirm),void p(c);p(c)},f=()=>{b(0)},_=()=>{b(1)},b=e=>{const a=l.value.getOption().series[0].zoom;let t=1.2;1===e&&(t=.8),l.value.setOption({series:{zoom:a*t}})};return(e,a)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{style:normalizeStyle("width: ".concat(i.value,"; height: ").concat(s.value,";")),ref_key:"chart",ref:t},null,4),createBaseVNode("div",{class:"zoom-buttons"},[createBaseVNode("button",{class:"zoom-in",onClick:f},"+"),createBaseVNode("button",{class:"zoom-out",onClick:_},"-")])]))}}),index_vue_vue_type_style_index_0_scoped_b8775e21_lang="",FishBone=_export_sfc$1(_sfc_main$2,[["__scopeId","data-v-b8775e21"]]),_hoisted_1$1={style:{"text-align":"center"}},_sfc_main$1={__name:"index",props:mergeModels(["defaultValue"],{modelValue:1,modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=ref(null);let t=useModel(e,"modelValue",1);const l=e;t.value=l.defaultValue;let o=1;function r(){const e=a.value,t=e.getContext("2d");switch(t.clearRect(0,0,e.width,e.height),t.beginPath(),o){case 1:console.log(333333),t.arc(20,20,10,Math.PI/2,Math.PI);break;case 2:t.arc(20,20,10,Math.PI/2,1.5*Math.PI);break;case 3:t.arc(20,20,10,Math.PI/2,2*Math.PI);break;case 4:t.arc(20,20,10,Math.PI/2,3*Math.PI)}t.lineTo(20,20),t.fill(),t.restore(),t.stroke()}function i(){o++,t.value=o,o>4&&(o=1,t.value=o),r()}return o=l.defaultValue,onMounted((()=>{nextTick((()=>{r()}))})),(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("canvas",{ref_key:"canvasRef",ref:a,width:"40",height:"40",onClick:i},null,512)]))}},a3_vue_vue_type_style_index_0_scoped_5b28dfdb_lang="",_withScopeId=e=>(pushScopeId("data-v-5b28dfdb"),e=e(),popScopeId(),e),_hoisted_1={class:"gva-search-box"},_hoisted_2={class:"gva-table-box"},_hoisted_3=_withScopeId((()=>createBaseVNode("i",{class:"el-icon-time"},null,-1))),_hoisted_4={style:{"margin-left":"10px"}},_hoisted_5=_withScopeId((()=>createBaseVNode("i",{class:"el-icon-time"},null,-1))),_hoisted_6={style:{"margin-left":"10px"}},_hoisted_7={class:"gva-pagination"},_hoisted_8={class:"block"},_hoisted_9=_withScopeId((()=>createBaseVNode("span",null,"why?",-1))),_hoisted_10=_withScopeId((()=>createBaseVNode("i",{class:"el-icon-plus"},null,-1))),_hoisted_11=["src"],_hoisted_12={class:"dialog-footer"},_sfc_main=Object.assign({name:"Setting"},{__name:"a3",setup(__props){const quillEditor=ref(),editorOptions=reactive({modules:{toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]}});ref(0);const dialogFormVisible=ref(!1),dialogImageUrl=ref(""),dialogVisible=ref(!1),handlePictureCardPreview=e=>{console.log(e),dialogImageUrl.value=e.url,dialogVisible.value=!0,dialogFormVisible.value=!0,console.log(dialogVisible.value)},drawer=ref(!1),direction=ref("rtl"),ize=ref("70%"),isShowReport=ref(!1),dialogTitle=ref("A3配置"),openDialog=(e,a)=>{switch(a){case"setting":dialogTitle.value="A3配置",isShowReport.value=!1;break;case"report":dialogTitle.value="A3填写报告",isShowReport.value=!0}showSettingDrawer(a,e)};function onClickNode(e){form.value.a3_affirm=JSON.stringify(e),setp.value=4}const Issues=ref([]);function onIssues(e){Issues.value.push(e)}function onReduceIssue(e){const a=Issues.value.findIndex((a=>a.name===e));Issues.value.splice(a,1)}const handleClose=()=>{initForm(),initDraw(),drawer.value=!1},ID=ref(1),showSettingDrawer=async(e,a)=>{const t=await getManageById({id:a.ID});ID.value=a.ID,0===t.code&&(form.value=t.data.manage,tableIssueData.value=strToJson(form.value.a3_issue_desc,tableIssueData.value),tableCauseData.value=strToJson(form.value.a3_cause,tableCauseData.value),tableResultData.value=strToJson(form.value.a3_result,tableResultData.value),tableCorrectData.value=strToJson(form.value.a3_correct,tableCorrectData.value),tableEmergencyData.value=strToJson(form.value.a3_contingency,tableEmergencyData.value),tableEndData.value=strToJson(form.value.a3_end,tableEndData.value),tableDeliveryData.value=strToJson(form.value.a3_verify,tableDeliveryData.value),configure.value=strToJson(form.value.a3_setting,configure.value),Issues.value=""===form.value.a3_issues?[]:JSON.parse(form.value.a3_issues),setp.value=form.value.a3_step),""!=form.value.a3_setting||"setting"===e?(permissionProcess(),drawer.value=!0):ElMessage({type:"error",message:"请先配置填写报告人员",showClose:!0})},isDisabled9=ref("disabled"),isDisabled1=ref("disabled"),isDisabled2=ref("disabled"),isDisabled3=ref("disabled"),isDisabled4=ref("disabled"),isDisabled5=ref("disabled"),isDisabled6=ref("disabled"),isDisabled7=ref("disabled"),isDisabled8=ref("disabled"),isShow9=ref(!1),isShow1=ref(!1),isShow2=ref(!1),isShow3=ref(!1),isShow4=ref(!1),isShow5=ref(!1),isShow6=ref(!1),isShow7=ref(!1),isShow8=ref(!1),userStore=useUserStore(),setp=ref(0),permissionProcess=()=>{for(let item of configure.value)if(item.issue_number<=setp.value+1){const tmp="isShow"+item.issue_number.toString(),tmp1="isDisabled"+item.issue_number.toString();eval(tmp).value=!0,userStore.userInfo.userName===item.principal&&(eval(tmp1).value="")}},handleChange=e=>{setp.value=e},initDraw=()=>{setp.value=0,isDisabled9.value="disabled",isDisabled1.value="disabled",isDisabled2.value="disabled",isDisabled3.value="disabled",isDisabled4.value="disabled",isDisabled5.value="disabled",isDisabled6.value="disabled",isDisabled7.value="disabled",isDisabled8.value="disabled",isShow9.value=!1,isShow1.value=!1,isShow2.value=!1,isShow3.value=!1,isShow4.value=!1,isShow5.value=!1,isShow6.value=!1,isShow7.value=!1,isShow8.value=!1,tableCorrectData.value=[{name:"",date:"",scheme:"",state:"1"},{name:"",date:"",scheme:"",state:"1"},{name:"",date:"",scheme:"",state:"1"}],tableCauseData.value=[{},{},{},{},{}],tableIssueData.value=[{describe:"(what)这是什么问题？",issue:"",isIssue:!1},{describe:"(where)问题在哪里出现？",issue:"",isIssue:!1},{describe:"(when)问题发生的时间？",issue:"",isIssue:!1},{describe:"(why)为什么说这是一个问题？",issue:"",isIssue:!1},{describe:"(who)谁发现&谁制造？",issue:"",isIssue:!1},{describe:"(how)问题如何被发现？",issue:"",isIssue:!1},{describe:"(how much/many)程度/数量",issue:"",isIssue:!1}],tableEmergencyData.value=[{name:"",date:"",scheme:"",state:1},{name:"",date:"",scheme:"",state:1},{name:"",date:"",scheme:"",state:1}],tableDeliveryData.value=[{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}],tableResultData.value=[{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}],tableEndData.value=[{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}]},tableIssueData=ref([{describe:"(what)这是什么问题？",issue:"",isIssue:!1},{describe:"(where)问题在哪里出现？",issue:"",isIssue:!1},{describe:"(when)问题发生的时间？",issue:"",isIssue:!1},{describe:"(why)为什么说这是一个问题？",issue:"",isIssue:!1},{describe:"(who)谁发现&谁制造？",issue:"",isIssue:!1},{describe:"(how)问题如何被发现？",issue:"",isIssue:!1},{describe:"(how much/many)程度/数量",issue:"",isIssue:!1}]),tableEmergencyData=ref([{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}]),tableDeliveryData=ref([{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}]),tableResultData=ref([{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}]),tableEndData=ref([{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}]),addTableData=e=>{const a={state:1};switch(e){case"emergency":tableEmergencyData.value.push(a);break;case"correct":tableCorrectData.value.push(a);break;case"delivery":tableDeliveryData.value.push(a)}},tableCorrectData=ref([{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""},{name:"",date:"",scheme:"",state:""}]),tableCauseData=ref([{},{},{},{},{}]),configure=ref([{title:"1.发现问题",principal:"",department:"",limit_date:0,issue_number:1},{title:"2.问题描述",principal:"",department:"",limit_date:0,issue_number:2},{title:"3.应急响应措施",principal:"",limit_date:0,department:"",issue_number:3},{title:"4.原因分析",principal:"",department:"",limit_date:0,issue_number:4},{title:"5.根本原因确认",principal:"",department:"",limit_date:0,issue_number:5},{title:"6.纠正措施",principal:"",department:"",limit_date:0,issue_number:6},{title:"7.措施验证",principal:"",department:"",limit_date:0,issue_number:7},{title:"8.保持改进结果",principal:"",department:"",limit_date:0,issue_number:8},{title:"9.传递",principal:"",department:"",limit_date:0,issue_number:9}]),apis=ref([]),departmentList=ref([]),genreList1=ref([]),supplierList=ref([]),projectList=ref([]);ref([]);const form=ref({serialnumber:"",department:"",mold:"",category:"",project:"",checkout_name:"",checkout_number:"",graph_number:"",version_number:"",purchase_order:"",production_order:"",delivery_order:"",packages_number:"",reject_packages_number:"",sample_checkout_number:"",reject_sample_checkout_number:"",supplier:"",checkout_date:"",describe:"",photograph:"",process_mode:"",duty_department:"",cause_desc:"",fill_from_date:"",disposal_concept:"",rework_number:0,rework_man_hour:0,rework_quantities:"",rework_process:"",rework_plan_date:"0001-01-01T00:00:00Z",rework_desc:"",rework_attachment:"",repair_plan_date:"0001-01-01T00:00:00Z",repair_desc:"",repair_attachment:"",parts_desc:"",series:"",operation_type:"",pass_date:"0001-01-01T00:00:00Z",area:"",find_addr:"",find_process:"",defect_problem:"",station:"",a3_principal:"",a3_team_top:"",a3_team_member:"",a3_issue_desc:"",a3_contingency:"",a3_cause:"",a3_affirm:"",a3_correct:"",a3_verify:"",a3_result:"",a3_end:"",a3_setting:"",a3_step:0,a3_issues:""}),findPrincipal=(e,a)=>{const t=ref([]);if(""!==e.a3_setting){return t.value=JSON.parse(e.a3_setting),t.value.find((e=>e.issue_number==a)).principal}return"暂无配置负责人"};ref([{value:"Just Do it",label:"Just Do it",type:"success"},{value:"A3",label:"A3",type:""},{value:"8D",label:"8D",type:"warning"}]);const moldList=ref([{value:"内部",label:"内部",type:"success"},{value:"外部",label:"外部",type:""},{value:"配做",label:"配做",type:"warning"}]),rules=ref({path:[{required:!0,message:"请输入api路径",trigger:"blur"}],apiGroup:[{required:!0,message:"请输入组名称",trigger:"blur"}],method:[{required:!0,message:"请选择请求方式",trigger:"blur"}],description:[{required:!0,message:"请输入api介绍",trigger:"blur"}]}),page=ref(1),total=ref(0),pageSize=ref(10),tableData=ref([]),searchInfo=ref({}),onReset=()=>{searchInfo.value={}},handleRemove=(e,a)=>{const t=a.indexOf(e);-1!==t&&a.splice(t,1),form.value.photograph=JSON.stringify(a.value)},onSubmit=()=>{page.value=1,pageSize.value=10,getTableData()},handleSizeChange=e=>{pageSize.value=e,getTableData()},handleCurrentChange=e=>{page.value=e,getTableData()},sortChange=({prop:e,order:a})=>{e&&("ID"===e&&(e="id"),searchInfo.value.orderKey=toSQLLine(e),searchInfo.value.desc="descending"===a),getTableData()},department=async()=>{const e=await getAuthorityList({page:page.value,pageSize:pageSize.value,...searchInfo.value});0===e.code&&(departmentList.value=e.data.list)};department();const genreList=async()=>{const e=await getGenreList({page:page.value,pageSize:pageSize.value,...searchInfo.value});0===e.code&&(genreList1.value=e.data.list)};genreList();const supplier=async()=>{const e=await getSupplierList({page:page.value,pageSize:pageSize.value,...searchInfo.value});0===e.code&&(supplierList.value=e.data.list)};supplier();const project=async()=>{const e=await getProjectList({page:page.value,pageSize:pageSize.value,...searchInfo.value});0===e.code&&(projectList.value=e.data.list)};project();const getTableData=async()=>{searchInfo.value.process_mode="A3";const e=await getManageList({page:page.value,pageSize:pageSize.value,orderKey:"id",desc:!0,...searchInfo.value});0===e.code&&(tableData.value=e.data.list,total.value=e.data.total,page.value=e.data.page,pageSize.value=e.data.pageSize)};getTableData();const handleSelectionChange=e=>{apis.value=e},apiForm=ref(null),initForm=()=>{apiForm.value.resetFields(),form.value={serialnumber:"",department:"",mold:"",category:"",project:"",checkout_name:"",checkout_number:"",graph_number:"",version_number:"",purchase_order:"",production_order:"",delivery_order:"",packages_number:"",reject_packages_number:"",sample_checkout_number:"",reject_sample_checkout_number:"",supplier:"",checkout_date:"",describe:"",photograph:"",process_mode:"",duty_department:"",cause_desc:"",fill_from_date:"",disposal_concept:"",rework_number:0,rework_man_hour:0,rework_quantities:"",rework_process:"",rework_plan_date:"0001-01-01T00:00:00Z",rework_desc:"",rework_attachment:"",repair_plan_date:"0001-01-01T00:00:00Z",repair_desc:"",repair_attachment:"",parts_desc:"",series:"",operation_type:"",area:"",find_addr:"",find_process:"",defect_problem:"",station:"",a3_principal:"",a3_team_top:"",a3_team_member:"",a3_issue_desc:"",a3_contingency:"",a3_cause:"",a3_affirm:"",a3_correct:"",a3_verify:"",a3_result:"",a3_end:"",a3_setting:"",a3_step:0,a3_issues:""},configure.value=[{title:"1.发现问题",principal:"",department:"",limit_date:0,issue_number:1},{title:"2.问题描述",principal:"",department:"",limit_date:0,issue_number:2},{title:"3.应急响应措施",principal:"",limit_date:0,department:"",issue_number:3},{title:"4.原因分析",principal:"",department:"",limit_date:0,issue_number:4},{title:"5.根本原因确认",principal:"",department:"",limit_date:0,issue_number:5},{title:"6.纠正措施",principal:"",department:"",limit_date:0,issue_number:6},{title:"7.措施验证",principal:"",department:"",limit_date:0,issue_number:7},{title:"8.保持改进结果",principal:"",department:"",limit_date:0,issue_number:8},{title:"9.传递",principal:"",department:"",limit_date:0,issue_number:9}]},closeDialog=()=>{initForm(),drawer.value=!1},enterDialog=async()=>{apiForm.value.validate((async e=>{if(4!==setp.value||0!==Issues.value.length){if((void 0!==Issues.value||Issues.value.length>0)&&(form.value.a3_issues=JSON.stringify(Issues.value)),form.value.a3_issue_desc=JSON.stringify(tableIssueData.value),form.value.a3_cause=JSON.stringify(tableCauseData.value),form.value.a3_result=JSON.stringify(tableResultData.value),form.value.a3_correct=JSON.stringify(tableCorrectData.value),form.value.a3_contingency=JSON.stringify(tableEmergencyData.value),form.value.a3_end=JSON.stringify(tableEndData.value),form.value.a3_verify=JSON.stringify(tableDeliveryData.value),form.value.a3_setting=JSON.stringify(configure.value),form.value.a3_step=setp.value,e){0===(await updateManage(form.value)).code&&ElMessage({type:"success",message:"报告成功",showClose:!0}),getTableData(),closeDialog()}}else ElMessage({type:"error",message:"请选择问题在提交",showClose:!0})}))};return(e,a)=>{const t=ElOption,l=ElSelect,o=ElFormItem,r=ElInput,i=ElButton,s=ElForm,n=ElTableColumn,d=ElProgress,u=ElTag,c=ElTable,m=ElPagination,p=ElCard,h=ElTimelineItem,f=ElSwitch,_=ElDatePicker,b=resolveComponent("CirclePlusFilled"),g=ElIcon,w=ElUpload,v=ElDialog,V=ElTimeline,C=ElDrawer;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1,[createVNode(s,{ref:"searchForm",inline:!0,model:searchInfo.value},{default:withCtx((()=>[createVNode(o,{label:"部门",style:{width:"200px"},prop:"method"},{default:withCtx((()=>[createVNode(l,{modelValue:searchInfo.value.department,"onUpdate:modelValue":a[0]||(a[0]=e=>searchInfo.value.department=e),placeholder:"选择部门"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(departmentList.value,(e=>(openBlock(),createBlock(t,{key:e.authorityId,label:e.authorityName,value:e.authorityName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),createVNode(o,{label:"类型",style:{width:"200px"},prop:"method"},{default:withCtx((()=>[createVNode(l,{modelValue:searchInfo.value.mold,"onUpdate:modelValue":a[1]||(a[1]=e=>searchInfo.value.mold=e),placeholder:"请选择"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(moldList.value,(e=>(openBlock(),createBlock(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),createVNode(o,{label:"类别",prop:"method",style:{width:"200px"}},{default:withCtx((()=>[createVNode(l,{modelValue:searchInfo.value.category,"onUpdate:modelValue":a[2]||(a[2]=e=>searchInfo.value.category=e),placeholder:"请选择"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(genreList1.value,(e=>(openBlock(),createBlock(t,{key:e.name,label:e.genre,value:e.genre},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),createVNode(o,{label:"受检物名称",prop:"method",style:{width:"200px"}},{default:withCtx((()=>[createVNode(r,{modelValue:searchInfo.value.checkout_name,"onUpdate:modelValue":a[3]||(a[3]=e=>searchInfo.value.checkout_name=e),placeholder:"受检物名称"},null,8,["modelValue"])])),_:1}),createVNode(o,{label:"供应商名称",prop:"method",style:{width:"200px"}},{default:withCtx((()=>[createVNode(r,{modelValue:searchInfo.value.supplier,"onUpdate:modelValue":a[4]||(a[4]=e=>searchInfo.value.supplier=e),placeholder:"供应商名称"},null,8,["modelValue"])])),_:1}),createVNode(o,{label:"项目名称",prop:"project",style:{width:"200px"}},{default:withCtx((()=>[createVNode(r,{modelValue:searchInfo.value.project,"onUpdate:modelValue":a[5]||(a[5]=e=>searchInfo.value.project=e),placeholder:"项目名称"},null,8,["modelValue"])])),_:1}),createVNode(o,null,{default:withCtx((()=>[createVNode(i,{type:"primary",icon:"search",onClick:onSubmit},{default:withCtx((()=>[createTextVNode("查询")])),_:1}),createVNode(i,{icon:"refresh",onClick:onReset},{default:withCtx((()=>[createTextVNode("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),createBaseVNode("div",_hoisted_2,[createVNode(c,{data:tableData.value,onSortChange:sortChange,onSelectionChange:handleSelectionChange},{default:withCtx((()=>[createVNode(n,{align:"left",label:"ID","min-width":"150",prop:"ID"}),createVNode(n,{align:"left",label:"编号","min-width":"150",prop:"serialnumber"}),createVNode(n,{align:"left",label:"部门","min-width":"150",prop:"department"}),createVNode(n,{align:"left",label:"类型","min-width":"150",prop:"mold"}),createVNode(n,{align:"left",label:"类别","min-width":"150",prop:"category"}),createVNode(n,{align:"left",label:"受检物名称","min-width":"150",prop:"checkout_name"}),createVNode(n,{align:"left",label:"受检物号","min-width":"150",prop:"checkout_number"}),createVNode(n,{align:"left",label:"处理方式","min-width":"150",prop:"process_mode"}),createVNode(n,{align:"left",label:"处理过程","min-width":"150",prop:"process_mode"},{default:withCtx((e=>[createVNode(d,{"text-inside":!0,"stroke-width":26,percentage:9===e.row.a3_step?100:10*e.row.a3_step,status:"success"},null,8,["percentage"])])),_:1}),createVNode(n,{align:"left",label:"当前负责人","min-width":"150",prop:"",sortable:"custom"},{default:withCtx((e=>[createVNode(u,{type:"info"},{default:withCtx((()=>[createTextVNode(toDisplayString(findPrincipal(e.row,e.row.a3_step)),1)])),_:2},1024)])),_:1}),createVNode(n,{align:"left",label:"计划时间","min-width":"150",prop:"checkout_date",sortable:"custom"},{default:withCtx((e=>[_hoisted_3,createBaseVNode("span",_hoisted_4,toDisplayString(unref(formatDate)(e.row.checkout_date)),1)])),_:1}),createVNode(n,{align:"left",label:"填表日期","min-width":"150",prop:"created_at",sortable:"custom"},{default:withCtx((e=>[_hoisted_5,createBaseVNode("span",_hoisted_6,toDisplayString(unref(formatDate)(e.row.created_at)),1)])),_:1}),createVNode(n,{align:"left",fixed:"right",label:"操作",width:"300"},{default:withCtx((a=>[createVNode(i,{icon:"download",type:"primary",link:"",onClick:t=>e.editApiFunc(a.row,"check")},{default:withCtx((()=>[createTextVNode("下载")])),_:2},1032,["onClick"]),createVNode(i,{type:"primary",icon:"setting",link:"",onClick:e=>openDialog(a.row,"setting")},{default:withCtx((()=>[createTextVNode(" 配置 ")])),_:2},1032,["onClick"]),createVNode(i,{icon:"edit",type:"primary",link:"",onClick:e=>openDialog(a.row,"report")},{default:withCtx((()=>[createTextVNode("填写报告")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),createBaseVNode("div",_hoisted_7,[createVNode(m,{"current-page":page.value,"page-size":pageSize.value,"page-sizes":[10,30,50,100],total:total.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:handleCurrentChange,onSizeChange:handleSizeChange},null,8,["current-page","page-size","total"])])]),createVNode(C,{modelValue:drawer.value,"onUpdate:modelValue":a[28]||(a[28]=e=>drawer.value=e),title:dialogTitle.value,direction:direction.value,"before-close":handleClose,size:ize.value},{footer:withCtx((()=>[createBaseVNode("div",_hoisted_12,[createVNode(i,{onClick:handleClose},{default:withCtx((()=>[createTextVNode("取 消")])),_:1}),createVNode(i,{type:"primary",onClick:enterDialog},{default:withCtx((()=>[createTextVNode("确 定")])),_:1})])])),default:withCtx((()=>[createBaseVNode("div",_hoisted_8,[createVNode(s,{ref_key:"apiForm",ref:apiForm,model:form.value,rules:rules.value,inline:!0},{default:withCtx((()=>[isShowReport.value?(openBlock(),createBlock(V,{key:0},{default:withCtx((()=>[isShow1.value?(openBlock(),createBlock(h,{key:0,timestamp:"1.问题简述&组建团队",placement:"top",class:normalizeClass(isDisabled1.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(o,{label:" 区域/位置:",prop:"area",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.area),1)])),_:1}),createVNode(o,{label:"工序/工位:",prop:"station",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.station),1)])),_:1}),createVNode(o,{label:"零件名称:",prop:"checkout_name",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.checkout_name),1)])),_:1}),createVNode(o,{label:"零件编号:",prop:"serialnumber",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.serialnumber),1)])),_:1}),createVNode(o,{label:"缺陷描述:",prop:"defect_problem",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.defect_problem),1)])),_:1}),createVNode(o,{label:"零件数量:",prop:"packages_number",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.packages_number),1)])),_:1}),createVNode(o,{label:"发现地点:",prop:"find_addr",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.find_addr),1)])),_:1}),createVNode(o,{label:"发现工序:",prop:"find_process",style:{width:"20%"}},{default:withCtx((()=>[createBaseVNode("span",null,toDisplayString(form.value.find_process),1)])),_:1}),createVNode(o,{label:"问题描述:",prop:"describe",style:{width:"100%"}},{default:withCtx((()=>[createBaseVNode("div",null,[createVNode(unref(QuillEditor),{options:editorOptions,"content-type":"html",ref_key:"quillEditor",ref:quillEditor,theme:"snow",content:form.value.describe,"onUpdate:content":a[6]||(a[6]=e=>form.value.describe=e),value:form.value.describe,readOnly:""},null,8,["options","content","value"])])])),_:1}),createVNode(o,{label:"组长:",prop:"describe",style:{width:"40%"}},{default:withCtx((()=>[createVNode(r,{modelValue:form.value.a3_team_top,"onUpdate:modelValue":a[7]||(a[7]=e=>form.value.a3_team_top=e),onInput:a[8]||(a[8]=e=>handleChange(1))},null,8,["modelValue"])])),_:1}),createVNode(o,{label:"团队成员:",prop:"describe",style:{width:"40%"}},{default:withCtx((()=>[createVNode(r,{modelValue:form.value.a3_team_member,"onUpdate:modelValue":a[9]||(a[9]=e=>form.value.a3_team_member=e),onInput:a[10]||(a[10]=e=>handleChange(1))},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow2.value?(openBlock(),createBlock(h,{key:1,timestamp:"2.问题描述",placement:"top",class:normalizeClass(isDisabled2.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableIssueData.value,border:"",style:{width:"100%"},stripe:!0,disabled:!0},{default:withCtx((()=>[createVNode(n,{label:"描述",align:"center","min-width":"150",prop:"product_serialnumber"},{default:withCtx((e=>[createBaseVNode("span",null,toDisplayString(e.row.describe),1)])),_:1}),createVNode(n,{label:"问题",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.issue,"onUpdate:modelValue":a=>e.row.issue=a,onInput:a[11]||(a[11]=e=>handleChange(2))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"(在其他产品/过程)是否有问题","min-width":"150",prop:"w_serialnumber"},{default:withCtx((e=>[createVNode(f,{modelValue:e.row.isIssue,"onUpdate:modelValue":a=>e.row.isIssue=a,"active-color":"#13ce66","inactive-color":"#D3D3D3"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow3.value?(openBlock(),createBlock(h,{key:2,timestamp:"3.应急响应措施",placement:"top",class:normalizeClass(isDisabled3.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableEmergencyData.value,border:"",style:{width:"100%"},stripe:!0},{default:withCtx((()=>[createVNode(n,{label:"NO",align:"center","min-width":"150",prop:"product_serialnumber"},{default:withCtx((e=>[createBaseVNode("span",null,toDisplayString(e.$index+1),1)])),_:1}),createVNode(n,{label:"应急相应措施(围堵)",align:"center","min-width":"150",prop:"scheme"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.scheme,"onUpdate:modelValue":a=>e.row.scheme=a,onInput:a[12]||(a[12]=e=>handleChange(3))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"负责人",align:"center","min-width":"150",prop:"name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"日期",align:"center","min-width":"150",prop:"date"},{default:withCtx((e=>[createVNode(_,{modelValue:e.row.date,"onUpdate:modelValue":a=>e.row.date=a,type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDT15:04:05Z"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"状态",align:"center","min-width":"150",prop:"state"},{default:withCtx((e=>[createVNode(_sfc_main$1,{defaultValue:e.row.state,modelValue:e.row.state,"onUpdate:modelValue":a=>e.row.state=a},null,8,["defaultValue","modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),createVNode(g,{onClick:a[13]||(a[13]=e=>addTableData("emergency")),class:"icon",size:"24",color:"#fb7a14"},{default:withCtx((()=>[createVNode(b)])),_:1})])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow4.value?(openBlock(),createBlock(h,{key:3,timestamp:"4.原因分析",placement:"top",class:normalizeClass(isDisabled4.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(FishBone,{height:500,onClickNode:onClickNode,id:ID.value,onIssues:onIssues,onReduceIssue:onReduceIssue,step:setp.value},null,8,["id","step"])])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow5.value?(openBlock(),createBlock(h,{key:4,timestamp:"5.根本原因确认",placement:"top",class:normalizeClass(isDisabled5.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableCauseData.value,border:"",style:{width:"100%"},stripe:!0},{default:withCtx((()=>[createVNode(n,{label:"",align:"center","min-width":"50",prop:"product_serialnumber"},{default:withCtx((e=>[_hoisted_9])),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(Issues.value,((e,t)=>(openBlock(),createBlock(n,{key:t,label:t+1+"."+e.name+"?",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row[e.$index+t],"onUpdate:modelValue":a=>e.row[e.$index+t]=a,onInput:a[14]||(a[14]=e=>handleChange(5))},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1},8,["data"])])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow6.value?(openBlock(),createBlock(h,{key:5,timestamp:"6.纠正措施",placement:"top",class:normalizeClass(isDisabled6.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableCorrectData.value,border:"",style:{width:"100%"},stripe:!0},{default:withCtx((()=>[createVNode(n,{label:"NO",align:"center","min-width":"150",prop:"product_serialnumber"},{default:withCtx((e=>[createBaseVNode("span",null,toDisplayString(e.$index+1),1)])),_:1}),createVNode(n,{label:"确定纠正措施",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.scheme,"onUpdate:modelValue":a=>e.row.scheme=a,onInput:a[15]||(a[15]=e=>handleChange(6))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"牵头人",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,onInput:a[16]||(a[16]=e=>handleChange(6))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"日期",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(_,{modelValue:e.row.date,"onUpdate:modelValue":a=>e.row.date=a,type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDT15:04:05Z"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"状态","min-width":"150",prop:"w_serialnumber"},{default:withCtx((e=>[createVNode(_sfc_main$1,{defaultValue:e.row.state,modelValue:e.row.state,"onUpdate:modelValue":a=>e.row.state=a},null,8,["defaultValue","modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),createVNode(g,{onClick:a[17]||(a[17]=e=>addTableData("correct")),class:"icon",size:"24",color:"#fb7a14"},{default:withCtx((()=>[createVNode(b)])),_:1})])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow7.value?(openBlock(),createBlock(h,{key:6,timestamp:"7.措施验证",placement:"top",class:normalizeClass(isDisabled7.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableDeliveryData.value,border:"",style:{width:"100%"},stripe:!0},{default:withCtx((()=>[createVNode(n,{label:"NO",align:"center","min-width":"150",prop:"product_serialnumber"},{default:withCtx((e=>[createBaseVNode("span",null,toDisplayString(e.$index+1),1)])),_:1}),createVNode(n,{label:"检验/验证",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.scheme,"onUpdate:modelValue":a=>e.row.scheme=a,onInput:a[18]||(a[18]=e=>handleChange(7))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"证据",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(w,{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":handlePictureCardPreview,"on-remove":handleRemove},{default:withCtx((()=>[_hoisted_10])),_:1}),createVNode(v,{modelValue:dialogFormVisible.value,"onUpdate:modelValue":a[19]||(a[19]=e=>dialogFormVisible.value=e)},{default:withCtx((()=>[createBaseVNode("img",{width:"100%",src:dialogImageUrl.value},null,8,_hoisted_11)])),_:1},8,["modelValue"])])),_:1}),createVNode(n,{label:"牵头人",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,onInput:a[20]||(a[20]=e=>handleChange(7))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"日期",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(_,{modelValue:e.row.date,"onUpdate:modelValue":a=>e.row.date=a,type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDT15:04:05Z"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"状态","min-width":"150",prop:"w_serialnumber"},{default:withCtx((e=>[createVNode(_sfc_main$1,{defaultValue:e.row.state,modelValue:e.row.state,"onUpdate:modelValue":a=>e.row.state=a},null,8,["defaultValue","modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),createVNode(g,{onClick:a[21]||(a[21]=e=>addTableData("delivery")),class:"icon",size:"24",color:"#fb7a14"},{default:withCtx((()=>[createVNode(b)])),_:1})])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow8.value?(openBlock(),createBlock(h,{key:7,timestamp:"8.保持改进结果",placement:"top",class:normalizeClass(isDisabled8.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableResultData.value,border:"",style:{width:"100%"},stripe:!0},{default:withCtx((()=>[createVNode(n,{label:"NO",align:"center","min-width":"150",prop:"product_serialnumber"},{default:withCtx((e=>[createBaseVNode("span",null,toDisplayString(e.$index+1),1)])),_:1}),createVNode(n,{label:"保持改进结果",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.scheme,"onUpdate:modelValue":a=>e.row.scheme=a,onInput:a[22]||(a[22]=e=>handleChange(8))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"牵头人",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,onInput:a[23]||(a[23]=e=>handleChange(8))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"日期",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(_,{modelValue:e.row.date,"onUpdate:modelValue":a=>e.row.date=a,type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDT15:04:05Z"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"状态","min-width":"150",prop:"w_serialnumber"},{default:withCtx((e=>[createVNode(_sfc_main$1,{defaultValue:e.row.state,modelValue:e.row.state,"onUpdate:modelValue":a=>e.row.state=a},null,8,["defaultValue","modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),createVNode(g,{onClick:a[24]||(a[24]=e=>addTableData("result")),class:"icon",size:"24",color:"#fb7a14"},{default:withCtx((()=>[createVNode(b)])),_:1})])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0),isShow9.value?(openBlock(),createBlock(h,{key:8,timestamp:"9.传递",placement:"top",class:normalizeClass(isDisabled9.value)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(c,{data:tableEndData.value,border:"",style:{width:"100%"},stripe:!0},{default:withCtx((()=>[createVNode(n,{label:"NO",align:"center","min-width":"150",prop:"product_serialnumber"},{default:withCtx((e=>[createBaseVNode("span",null,toDisplayString(e.$index+1),1)])),_:1}),createVNode(n,{label:"标的/活动",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.scheme,"onUpdate:modelValue":a=>e.row.scheme=a,onInput:a[25]||(a[25]=e=>handleChange(9))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"牵头人",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(r,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,onInput:a[26]||(a[26]=e=>handleChange(9))},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"日期",align:"center","min-width":"150",prop:"product_name"},{default:withCtx((e=>[createVNode(_,{modelValue:e.row.date,"onUpdate:modelValue":a=>e.row.date=a,type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDT15:04:05Z"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),createVNode(n,{label:"状态","min-width":"150",prop:"w_serialnumber"},{default:withCtx((e=>[createVNode(_sfc_main$1,{defaultValue:e.row.state,modelValue:e.row.state,"onUpdate:modelValue":a=>e.row.state=a},null,8,["defaultValue","modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),createVNode(g,{onClick:a[27]||(a[27]=e=>addTableData("end")),class:"icon",size:"24",color:"#fb7a14"},{default:withCtx((()=>[createVNode(b)])),_:1})])),_:1})])),_:1},8,["class"])):createCommentVNode("",!0)])),_:1})):createCommentVNode("",!0),isShowReport.value?createCommentVNode("",!0):(openBlock(),createBlock(V,{key:1},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(configure.value,((e,a)=>(openBlock(),createBlock(h,{key:a,timestamp:e.title,placement:"top"},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(s,{inline:!0},{default:withCtx((()=>[createVNode(o,{label:"部门:",prop:"serialnumber",style:{width:"25%"}},{default:withCtx((()=>[createVNode(l,{modelValue:e.department,"onUpdate:modelValue":a=>e.department=a,placeholder:"选择部门"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(departmentList.value,(e=>(openBlock(),createBlock(t,{key:e.authorityId,label:e.authorityName,value:e.authorityName},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),createVNode(o,{label:"负责人:",prop:"principal",style:{width:"30%"}},{default:withCtx((()=>[createVNode(r,{placeholder:"负责人",size:"mini",modelValue:e.principal,"onUpdate:modelValue":a=>e.principal=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),createVNode(o,{label:"限定时间/天:",prop:"limit_date",style:{width:"30%"}},{default:withCtx((()=>[createVNode(r,{placeholder:"限定时间",size:"mini",modelValue:e.limit_date,"onUpdate:modelValue":a=>e.limit_date=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1}))])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title","direction","size"])])}}}),a3=_export_sfc$1(_sfc_main,[["__scopeId","data-v-5b28dfdb"]]);export{a3 as default};
