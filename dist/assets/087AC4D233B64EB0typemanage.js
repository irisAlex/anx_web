/*! 
 Build based on gin-vue-admin 
 Time : 1713878256000 */
import{s as e,_ as a,a as l,o as t,c as o,b as s,d as i,w as r,f as n,j as u,$ as d,k as p,E as m}from"./087AC4D233B64EB0index.js";import{E as c}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as v}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";import"./087AC4D233B64EB0scrollbar.js";/* empty css                      */import{E as g,a as B}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{a as y,E as C}from"./087AC4D233B64EB0form-item.js";/* empty css                      */import{t as f}from"./087AC4D233B64EB0stringFun.js";/* empty css                     */import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0index23.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";const E={class:"gva-search-box"},b={class:"gva-table-box"},h={class:"gva-btn-list"},A={class:"gva-pagination"},D={class:"dialog-footer"},j=a(Object.assign({name:"Api"},{__name:"typemanage",setup(a){const j=l([]),_=l({genre:"",name:""});l([{value:"POST",label:"创建",type:"success"},{value:"GET",label:"查看",type:""},{value:"PUT",label:"更新",type:"warning"},{value:"DELETE",label:"删除",type:"danger"}]);const w=l(""),k=l({genre:[{required:!0,message:"请输入类别",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}),V=l(1),x=l(0),T=l(10),z=l([]),U=l({}),I=()=>{U.value={}},S=()=>{V.value=1,T.value=10,L()},F=e=>{T.value=e,L()},q=e=>{V.value=e,L()},O=({prop:e,order:a})=>{e&&("ID"===e&&(e="id"),U.value.orderKey=f(e),U.value.desc="descending"===a),L()},L=async()=>{const a=await(l={page:V.value,pageSize:T.value,...U.value},e({url:"/type/getAllTypeList",method:"post",data:l}));var l;0===a.code&&(z.value=a.data.list,x.value=a.data.total,V.value=a.data.page,T.value=a.data.pageSize)};L();const P=e=>{j.value=e};l(!1),l(!1);const G=l(null),K=l("添加类别"),$=l(!1),H=e=>{switch(e){case"addApi":K.value="添加类别";break;case"edit":K.value="编辑类别"}w.value=e,$.value=!0},J=()=>{G.value.resetFields(),_.value={genre:"",name:""},$.value=!1},M=async a=>{const l=await(t={id:a.ID},e({url:"/type/getTypeById",method:"post",data:t}));var t;_.value=l.data.typem,H("edit")},N=async()=>{G.value.validate((async a=>{if(a)switch(w.value){case"addApi":0===(await(l=_.value,e({url:"/type/createType",method:"post",data:l}))).code&&u({type:"success",message:"添加成功",showClose:!0}),L(),J();break;case"edit":{const a=await(a=>e({url:"/type/updateType",method:"post",data:a}))(_.value);0===a.code&&u({type:"success",message:"编辑成功",showClose:!0}),L(),J()}break;default:u({type:"error",message:"未知操作",showClose:!0})}var l}))},Q=async a=>{d.confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var l;0===(await(l=a,e({url:"/type/deleteType",method:"post",data:l}))).code&&(u({type:"success",message:"删除成功!"}),1===z.value.length&&V.value>1&&V.value--,L())}))};return(e,a)=>{const l=p,u=y,d=m,f=C,j=g,w=B,L=v,R=c;return t(),o("div",null,[s("div",E,[i(f,{ref:"searchForm",inline:!0,model:U.value},{default:r((()=>[i(u,{label:"物料类别"},{default:r((()=>[i(l,{modelValue:U.value.genre,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.genre=e),placeholder:"物料类别"},null,8,["modelValue"])])),_:1}),i(u,{label:"物料类别名称"},{default:r((()=>[i(l,{modelValue:U.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.name=e),placeholder:"供应商类型"},null,8,["modelValue"])])),_:1}),i(u,null,{default:r((()=>[i(d,{type:"primary",icon:"search",onClick:S},{default:r((()=>[n("查询")])),_:1}),i(d,{icon:"refresh",onClick:I},{default:r((()=>[n("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",b,[s("div",h,[i(d,{type:"primary",icon:"plus",onClick:a[2]||(a[2]=e=>H("addApi"))},{default:r((()=>[n("新增")])),_:1})]),i(w,{data:z.value,onSortChange:O,onSelectionChange:P},{default:r((()=>[i(j,{align:"left",label:"ID","min-width":"150",prop:"ID",sortable:"custom"}),i(j,{align:"left",label:"物料类别","min-width":"150",prop:"genre",sortable:"custom"}),i(j,{align:"left",label:"物料类别名称","min-width":"150",prop:"name",sortable:"custom"}),i(j,{align:"left",fixed:"right",label:"操作",width:"300"},{default:r((e=>[i(d,{icon:"edit",type:"primary",link:"",onClick:a=>M(e.row)},{default:r((()=>[n("修改")])),_:2},1032,["onClick"]),i(d,{icon:"delete",type:"primary",link:"",onClick:a=>Q(e.row)},{default:r((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",A,[i(L,{"current-page":V.value,"page-size":T.value,"page-sizes":[10,30,50,100],total:x.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:q,onSizeChange:F},null,8,["current-page","page-size","total"])])]),i(R,{modelValue:$.value,"onUpdate:modelValue":a[5]||(a[5]=e=>$.value=e),"before-close":J,title:K.value,width:"30%"},{footer:r((()=>[s("div",D,[i(d,{onClick:J},{default:r((()=>[n("取 消")])),_:1}),i(d,{type:"primary",onClick:N},{default:r((()=>[n("确 定")])),_:1})])])),default:r((()=>[i(f,{ref_key:"apiForm",ref:G,model:_.value,rules:k.value,inline:!0},{default:r((()=>[i(u,{label:"物料类别",prop:"genre",style:{width:"100%"}},{default:r((()=>[i(l,{placeholder:"物料类别",size:"mini",modelValue:_.value.genre,"onUpdate:modelValue":a[3]||(a[3]=e=>_.value.genre=e)},null,8,["modelValue"])])),_:1}),i(u,{label:"物料类别名称",prop:"name",style:{width:"100%"}},{default:r((()=>[i(l,{placeholder:"物料类别名称",size:"mini",modelValue:_.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>_.value.name=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-4278bc00"]]);export{j as default};
